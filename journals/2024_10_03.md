# #FP 递归函数转写为CPS函数
	- 在python下分别使用递归形式和使用CPS形式，编写fib函数和sum函数：
	- ```python
	  def sum(arr):
	      if not arr:
	          return 0
	      return arr[0] + sum(arr[1:])
	  
	  def sum_cps(arr, cont):
	      if not arr:
	          cont(0)
	      else:
	          sum_cps(arr[1:], lambda x: cont(arr[0] + x))
	          
	  def fib(n: int):
	      if n <= 1:
	          return n
	      return fib(n - 1) + fib(n - 2)
	  
	  def fib_cps(n: int, cont: Callable[[int], None]):
	      if n <= 1:
	          cont(n)
	      else:
	          fib_cps(n - 1, lambda x: fib_cps(n - 2, lambda y: cont(x + y)))
	  ```
	- 可以注意到，递归函数转写成CPS风格函数，**其要点就在于，对于递归的地方，返回值值从直接获取到和使用，变为从回调函数中获取到和使用**。这里有点像Monad，值在一个特定的上下文中传递。
	- 但这简直就是脱裤子放屁——即使外层写成了尾递归的形式，但cont还是会一层层地累计，**新的cont要调用旧的cont，外层不爆栈，最后cont函数调用的时候仍旧会因为调用深度过深而爆栈啊**！
	- 为此需要变换思路——新的cont不能通过函数调用去调用旧的cont，而是**让新的cont引用（包装）旧的cont以及要传递给它的参数**，把函数调用栈转化为链表结构，这样便能不增加调用栈深度便得到结果。